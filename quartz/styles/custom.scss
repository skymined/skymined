@use "./base.scss";

/* Prevent viewport width quirks that cause horizontal clipping on mobile browsers. */
html {
  width: 100%;
}

/* Desktop: hide Explorer heading row and show tree immediately from root folders */
@media all and (min-width: 801px) {
  .explorer > .desktop-explorer {
    display: none !important;
  }

  .explorer > .explorer-content {
    margin-top: 0;
  }

  /* Left sidebar: disable viewport-locked scrolling and let explorer grow with page height. */
  .page > #quartz-body .sidebar.left {
    position: static;
    height: auto;
    align-self: start;
    overflow: visible;
  }

  .page > #quartz-body .sidebar.left .explorer {
    overflow: visible;
  }

  .page > #quartz-body .sidebar.left .explorer-content {
    overflow: visible;
    max-height: none;
  }
}

/* Folder/list page title links: use white in dark mode instead of yellow accent */
:root[saved-theme="dark"] .page-listing .section .desc > h3 > a,
:root[saved-theme="dark"] li.section-li > .section > .desc > h3 > a {
  color: #f5f7ff !important;
}

:root[saved-theme="dark"] .page-listing .section .desc > h3 > a:hover,
:root[saved-theme="dark"] li.section-li > .section > .desc > h3 > a:hover {
  color: #ffffff !important;
}

/* Breadcrumbs: yellow */
.breadcrumb-container .breadcrumb-element > a {
  color: var(--secondary) !important;
}

.breadcrumb-container .breadcrumb-element > a:hover {
  color: #ffe08a !important;
}

.breadcrumb-container .breadcrumb-element > p {
  color: var(--secondary);
}

/* Explorer spacing */
.explorer-content .explorer-ul > li {
  margin: 0.3rem 0;
}

.explorer-content .folder-outer > ul > li {
  margin: 0.24rem 0;
}

.folder-container {
  padding: 0.08rem 0;
}

/* Explorer: nested folders/files use a noticeably darker yellow than root folders */
:root[saved-theme="dark"] .explorer-content .folder-outer .folder-container div > a,
:root[saved-theme="dark"] .explorer-content .folder-outer .folder-container div > button span {
  color: #9a7300 !important;
}

:root[saved-theme="dark"] .explorer-content .folder-outer .folder-container div > a:hover,
:root[saved-theme="dark"] .explorer-content .folder-outer .folder-container div > button:hover span {
  color: #c39400 !important;
}

/* Explorer: nested folder chevron + nested file links */
:root[saved-theme="dark"] .explorer-content .folder-outer .folder-icon {
  color: #9a7300 !important;
}

:root[saved-theme="dark"] .explorer-content .folder-outer ul li > a {
  color: #a37a00 !important;
  opacity: 0.95 !important;
}

:root[saved-theme="dark"] .explorer-content .folder-outer ul li > a:hover {
  color: #c39400 !important;
}

/* Explorer: nested tree connector line */
:root[saved-theme="dark"] .explorer-content .folder-outer > ul {
  border-left: 1px solid #6f5300 !important;
}

/* Keep tablet layout readable by shrinking the left rail on medium screens. */
@media all and (min-width: 801px) and (max-width: 1200px) {
  .page > #quartz-body {
    grid-template-columns: minmax(240px, 30vw) minmax(0, 1fr);
  }
}

/* Mobile/small-tablet hardening: avoid horizontal overflow and cramped top controls. */
@media all and (max-width: 800px) {
  .page > #quartz-body {
    grid-template-columns: minmax(0, 1fr) !important;
    padding: 0 0.9rem;
    row-gap: 0.8rem;
  }

  .page > #quartz-body .sidebar.left {
    width: 100%;
    gap: 0.6rem;
    justify-content: flex-start;
    padding-top: 1rem;
  }

  .page > #quartz-body .sidebar.left > * {
    min-width: 0;
  }

  .page > #quartz-body .sidebar.left .search {
    min-width: 0;
    max-width: 11.5rem;
    flex: 1 1 8rem;
  }

  .page > #quartz-body .sidebar.left .search > .search-button {
    padding-right: 0.5rem;
  }

  .page > #quartz-body .sidebar.left .search > .search-button > p {
    display: none;
  }

  .page > #quartz-body .center,
  .page > #quartz-body .center > article,
  .page > #quartz-body .center .page-header,
  .page > #quartz-body .center .page-footer {
    min-width: 0;
  }

  article > h1,
  article > h2,
  article > h3 {
    overflow-wrap: anywhere;
  }

  .mobile-only.profile-card {
    margin-top: 0.4rem;
  }

  .mobile-only.profile-card .profile-image {
    max-height: 320px;
  }
}
